<!DOCTYPE html>  
 <!-- index.php !-->  
 <html>  
      <head>  
           <title>Crud App</title>  
           <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />  
           <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>  
      </head>  
      <body>  
            <nav class="navbar navbar-default">
             <div class="container-fluid">
             <div class="container">
                 <div class="navbar-header">
                 <a class="navbar-brand" href="http://localhost/testAngularJs/Societes/index.html">Agridata Application</a>
                 </div>
             <div class="collapse navbar-collapse">
              <ul class="nav navbar-nav navbar-right">
                    <li><a href="http://localhost/testAngularJs/LoginAdmin/index.php">Log Out</a></li>
              </ul>
             </div> 
             </div>
             </div>
            </nav>
            <br /><br />  
                    <div class="container">
                    <header class="jumbotron" style="background-color: #fcece9">
                    <div class="container">
                    <h1 style="text-align: center;">Welcome to BeePhyto</h1>
                    </div>   
                    </div> 
                    <div class="container">
                    <div class="row">
                       <div class="col-md-2">
                           <ul class="nav nav-pills nav-stacked">
                                <li class="active"><a href="#" style="background-color: #fcece9"><font color="#0000">Home</font></a></li>
                                <li><a href="http://localhost/testAngularJs/Actualites/index.html"><font color="#0000">Actualites</font></a></li>
                                <li><a href="http://localhost/testAngularJs/Categorie/index.html"><font color="#0000">Categories</font></a></li>
                                <li><a href="http://localhost/testAngularJs/Culture/index.html"><font color="#0000">Cultures</font></a></li>
                                <li><a href="http://localhost/testAngularJs/Ennemis/index.html"><font color="#0000">Ennemis</font></a></li>
                                <li><a href="http://localhost/testAngularJs/Societes/index.html"><font color="#0000">Societes</font></a></li>
                                <li><a href="http://localhost/testAngularJs/Agences/index.html"><font color="#0000">Agences</font></a></li>
                                <li><a href="http://localhost/testAngularJs/Produits/index.html"><font color="#0000">Produits</font></a></li>
                              </ul>
                       </div>
                    <div class="col-md-10">
                    <div ng-app="myapp" ng-controller="usercontroller">  
                     <label>Raison Sociale</label>  
                     <input type="text" name="_raison_sociale" ng-model="raison_sociale" class="form-control" />  
                     <br />  
                     <label>Mobile</label>  
                     <input type="text" name="_mobile" ng-model="mobile" class="form-control" />  
                     <br />
                     <label>Fix</label>  
                     <input type="text" name="_fix" ng-model="fix" class="form-control" />  
                     <br />
                     <label>Fax</label>  
                     <input type="text" name="_fax" ng-model="fax" class="form-control" />  
                     <br />
                     <label>Adresse</label>  
                     <input type="text" name="_adresse" ng-model="adresse" class="form-control" />  
                     <br />  
                     <label>Email</label>  
                     <input type="text" name="_email" ng-model="email" class="form-control" />  
                     <br />  
                     <label>Site Web</label>  
                     <input type="text" name="_site_web" ng-model="site_web" class="form-control" />  
                     <br />  
                     <label>Latitude</label>  
                     <input type="text" name="_latitude" ng-model="latitude" class="form-control" />  
                     <br />  
                     <label>Longitude</label>  
                     <input type="text" name="_longitude" ng-model="longitude" class="form-control" />  
                     <br />    
                     <input type="hidden" ng-model="societeId" />
                     <input type="submit" name="btnInsert" class="btn btn-danger" ng-click="insertData()" value="{{btnName}}"/> 
                     <br /><br />  
                     <table class="table table-bordered">  
                          <tr>  
                               <th>Raison Sociale</th>  
                               <th>Mobile</th>
                               <th>Fix</th>
                               <th>Fax</th> 
                               <th>Adresse</th>
                               <th>Email</th>
                               <th>Site Web</th>
                               <th>Latitude</th>
                               <th>Longitude</th>
                               <th>Update</th> 
                               <th>Delete</th>
                          </tr>  
                          <tr ng-repeat="x in societes track by $index">  
                               <td>{{x.raison_sociale}}</td>  
                               <td>{{x.mobile}}</td>
                               <td>{{x.fix}}</td>
                               <td>{{x.fax}}</td>
                               <td>{{x.adresse}}</td>
                               <td>{{x.email}}</td>
                               <td>{{x.site_web}}</td>
                               <td>{{x.latitude}}</td>
                               <td>{{x.longitude}}</td>
                               <td><button ng-click="updateData( x.raison_sociale, x.mobile,x.fix,x.fax, x.adresse,x.email,x.site_web,x.latitude,x.longitude)" class="btn btn-info btn-xs">Update</button></td>
                               <td><button ng-click="deleteData( x.raison_sociale)" class="btn btn-danger btn-xs">Delete</button></td>  
                          </tr>  
                     </table>
                     </div> 
                     </div> 
                  </div>
                  </div>
      </body>  
 </html>  
 <script>  
 var app = angular.module("myapp",[]);  
 app.controller("usercontroller", function($scope, $http){  
  $scope.btnName = "ADD"; 
      $scope.insertData = function(){  
           $http.post(  
                "insert.php",  
                { 'mobile':$scope.mobile,'fix':$scope.fix,'fax':$scope.fax,'adresse':$scope.adresse,'email':$scope.email,'site_web':$scope.site_web,'latitude':$scope.latitude,'longitude':$scope.longitude,'btnName':$scope.btnName, 'raison_sociale':$scope.raison_sociale}  
           ).success(function(data){  
                alert(data);  
                $scope.raison_sociale = null;  
                $scope.mobile = null;
                $scope.fix = null; 
                $scope.fax = null; 
                $scope.adresse = null; 
                $scope.email = null; 
                $scope.site_web = null; 
                $scope.latitude = null; 
                $scope.longitude = null; 
                $scope.btnName = "ADD"; 
                $scope.displayData();  
           });  
      }
      $scope.displayData = function(){  
           $http.get("select.php")  
           .success(function(data){  
                $scope.societes = data;  
           });  
      }
         $scope.updateData = function( raison_sociale, mobile,fix,fax,adresse,email,site_web,latitude,longitude){  
           $scope.raison_sociale = raison_sociale;  
           $scope.mobile = mobile;  
           $scope.fix = fix;
           $scope.fax = fax;
           $scope.adresse = adresse;
           $scope.email = email;
           $scope.site_web = site_web;
           $scope.latitude = latitude;
           $scope.longitude = longitude;
           $scope.btnName = "Update";  
      }
      $scope.deleteData = function(raison_sociale){  
           if(confirm("Are you sure you want to delete this data?"))  
           {  
                $http.post("delete.php", {'raison_sociale':raison_sociale})  
                .success(function(data){  
                     alert(data);  
                     $scope.displayData();  
                });  
           }  
           else  
           {  
                return false;  
           }  
      }       
 });  
 </script>  
